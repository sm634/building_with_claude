from anthropic import Anthropic
from dotenv import load_dotenv
import os

_ = load_dotenv(override=True)

client = Anthropic()
model = os.getenv("CLAUDE_MODEL")


def add_user_message(messages, text):
    user_message = {"role": "user", "content": text}
    messages.append(user_message)

def add_assistant_message(messages, text):
    assistant_message = {"role": "assistant", "content": text}
    messages.append(assistant_message)

def chat(messages):
    message = client.messages.create(
        model=model,
        max_tokens=1000,
        messages=messages
    )
    return message.content[0].text


# Create chat loop
messages = []
while True:
    user_input = input("You: ")
    add_user_message(messages, user_input)
    print("----------------")

    response = chat(messages)
    add_assistant_message(messages, response)
    print("----------------")
    
    print("Claude:", response)